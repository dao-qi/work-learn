# 第 1 章 导论

2020 年 4 月 18 日 23:20:53

---

## 1.1 一些概念

对象的概念

```{.line-numbers}
万物皆对象
对象之间并不是相互独立的.
程序是一大堆对象的组合.
每一个对象都有一个类型
```

类的概念

```{.line-numbers}

类定义了一组对象的行为,为外部提供了某些接口以执行这些行为.
每个对象都隶属于一个特定的类.
```

类定义了一些行为,但这些行为总有相应的代码去完成,而这些代码不想让"客户程序员"访问到,这就需要一种机制能够限制客户程序员.java 采用关键字设置类的边界:

```java
public:    任何人都能访问
protected: 包内的和继承类能够访问.
(friendly): 默认的,只能包内访问.
private:   只有同类中可以访问.
```

> 从上面看出同一个包的优先级是高于继承的.

重用

```xml
一个类被创建出来,应该能被重复使用,重用一个类有两种方式:
1. 组织(包含):将类的对象作为新类的成员变量.
2. 继承:
本书中提倡使用组织的方式,更具有灵活性,应该慎用继承.
```

---

### 继承

为什么要有继承?
如果要实现和以有类相似功能的一个类,重新写一个类是浪费的,可以使用继承克隆基类,再根据情况改造.

继承类的`修改`和`扩展`:

1. 修改是提倡的,这正是继承所要解决的原始需求.如果子类只修改父类的方法,我们可以称子类和父类的关系为`是一个`,这时候完全可以用子类替代父类.---`等价`
2. 仅仅扩展是禁止的,如果继承一个类而只是添加一些新的方法,完全可以用`组织`(组合)替代.
3. 在修改的同时扩展,是不可避免的,这时候可以称子类和父类是`类似`关系,子类有父类的接口,但是如果将子类赋值给父类,就无法访问子类扩展的接口.

> 注意:继承之后如果修改父类,修改也会反映在新类上.

```java{.line-numbers}

void doStuff(Shape s) {
  s.erase();
  // ...
  s.draw();
}

Circle c = new Circle();
Triangle t = new Triangle();
Line l = new Line();
doStuff(c);
doStuff(t);
doStuff(l);
```

上面的代码能够正确执行,将一个消息发送给一个对象,并不知道对象的具体类型,单结果依然正确,这种情况就是`多态性`,依赖于动态绑定.
设计模式中策略模式正是的依赖多态性.

---

### 抽象类和接口

为了满足什么样的需求:
有时候我们希望某一个类只是作为子类的一个模板,不希望使用者创建该类的实例.

抽象类和抽象方法:

```{.line-numbers}
使用abstract修饰
抽象方法只能在抽象类中
子类必须实现抽象方法,否则子类也是抽象类.
```

接口:

```{.line-numbers}
完全禁止了函数的实现.
一个类可以实现多个接口
```

---

### 杂项

1. java 的所有对象都继承自 Object 对象,即单根结构.
2. 早期的 java 集合都是 Object 集合,即集合中存放的都是 Object 类,取出时需要自己进行类型转换.(Downcasting),但有时我们不知道取出来的对象的真正类型,可能出现错误.那么,我们可以规定一个集合只能存放某种类型的对象,取的时候也只能取出这种类型,即`参数化类型`/`泛型`.
3. java 有统一的异常处理机制,异常处理是在面向对象出现之前就存在的.
